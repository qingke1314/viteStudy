<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <style>
    * {
      padding: 0;
      margin: 0;
    }
    div {
      height: 200px;
      width: 200px;
      border: 1px solid rebeccapurple;
    }
  </style>
</head>
<body>
  <div id="d1"></div>
  <div id="d2"></div>
  <div id="d3"></div>
  <button id="btn">点我</button>
</body>
<script>
  // 这是一个对按钮点击事件的观察器
  class Watcher{
    constructor(id) {
      let btnDom = document.querySelector(id);
      this.subs = [];
      if(btnDom) {
        btnDom.onclick = () => {
          this.subs.forEach(e => {
            e && e.update();
          })
        }
      }
    }
    addSub(sub) {
      if(!this.subs.includes(sub)) {
        this.subs.push(sub);
      }
    }
  }
  // 这是订阅者，更新事件为：我观察到了
  class Subscriber {
    constructor(id) {
      this.el = document.querySelector(id);
    }
    update() {
      this.el.innerText = '我观察到了！'
    }
  }
  // 实例化观察者、订阅者，然后注册即可
  let watcher = new Watcher('#btn');
  let sub1 = new Subscriber('#d1');
  let sub2 = new Subscriber('#d2');
  let sub3 = new Subscriber('#d3');
  watcher.addSub(sub1);
  watcher.addSub(sub2);
  watcher.addSub(sub3);
</script>